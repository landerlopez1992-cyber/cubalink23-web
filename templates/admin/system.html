<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ config.app_name }} - Configuración del Sistema</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #1a1a2e;
            color: #e0e0e0;
        }
        .sidebar {
            min-height: 100vh;
            background-color: #16213e;
            color: #e0e0e0;
        }
        .card-stats {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            background-color: #0f3460;
            color: #e0e0e0;
        }
        .nav-link {
            color: #e0e0e0;
            border-radius: 10px;
            margin: 5px 0;
        }
        .nav-link:hover, .nav-link.active {
            background-color: #0f3460;
            color: white;
        }
        .table {
            color: #e0e0e0;
        }
        .table th {
            background-color: #16213e;
            border-color: #1a1a2e;
        }
        .table td {
            background-color: #0f3460;
            border-color: #1a1a2e;
        }
        .btn-primary {
            background-color: #e94560;
            border-color: #e94560;
        }
        .btn-primary:hover {
            background-color: #b83f54;
            border-color: #b83f54;
        }
        .btn-success {
            background-color: #28a745;
            border-color: #28a745;
        }
        .btn-outline-primary {
            color: #e94560;
            border-color: #e94560;
        }
        .btn-outline-primary:hover {
            background-color: #e94560;
            border-color: #e94560;
        }
        .form-control {
            background-color: #1a1a2e;
            border-color: #16213e;
            color: #e0e0e0;
        }
        .form-control:focus {
            background-color: #1a1a2e;
            border-color: #e94560;
            color: #e0e0e0;
            box-shadow: 0 0 0 0.2rem rgba(233, 69, 96, 0.25);
        }
        .form-select {
            background-color: #1a1a2e;
            border-color: #16213e;
            color: #e0e0e0;
        }
        .nav-tabs .nav-link {
            color: #e0e0e0;
            background-color: #0f3460;
            border-color: #1a1a2e;
        }
        .nav-tabs .nav-link.active {
            background-color: #e94560;
            border-color: #e94560;
            color: white;
        }
        .tab-content {
            background-color: #0f3460;
            border: 1px solid #1a1a2e;
        }
        textarea.form-control {
            background-color: #1a1a2e;
            border-color: #16213e;
            color: #e0e0e0;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar p-3">
                <div class="text-center mb-4">
                    <h4 class="text-white"><i class="fas fa-plane"></i> {{ config.app_name }}</h4>
                    <small class="text-white-50">Panel de Administración</small>
                </div>
                
                <nav class="nav flex-column">
                    <a class="nav-link" href="/admin/">
                        <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                    </a>
                    <a class="nav-link" href="/admin/users">
                        <i class="fas fa-users me-2"></i> Usuarios
                    </a>
                    <a class="nav-link" href="/admin/products">
                        <i class="fas fa-box me-2"></i> Productos
                    </a>
                    <a class="nav-link" href="/admin/orders">
                        <i class="fas fa-shopping-cart me-2"></i> Órdenes
                    </a>
                    <a class="nav-link" href="/admin/flights">
                        <i class="fas fa-plane me-2"></i> Vuelos
                    </a>
                    <a class="nav-link active" href="/admin/system">
                        <i class="fas fa-cog me-2"></i> Sistema
                    </a>
                    <a class="nav-link" href="/admin/vendors">
                        <i class="fas fa-store me-2"></i> Vendedores
                    </a>
                    <a class="nav-link" href="/admin/drivers">
                        <i class="fas fa-motorcycle me-2"></i> Repartidores
                    </a>
                    <a class="nav-link" href="/admin/vehicles">
                        <i class="fas fa-car me-2"></i> Renta Car
                    </a>
                    <a class="nav-link" href="/admin/support-chat">
                        <i class="fas fa-headset me-2"></i> Chat de Soporte
                    </a>
                    <a class="nav-link" href="/admin/alerts">
                        <i class="fas fa-exclamation-triangle me-2"></i> Alertas
                    </a>
                    <a class="nav-link" href="/admin/wallet">
                        <i class="fas fa-wallet me-2"></i> Billetera
                    </a>
                    <a class="nav-link" href="/admin/payment-methods">
                        <i class="fas fa-credit-card me-2"></i> Métodos de Pago
                    </a>
                    <a class="nav-link" href="/admin/payroll">
                        <i class="fas fa-money-bill-wave me-2"></i> Nómina
                    </a>
                    <a class="nav-link mt-4" href="/auth/logout">
                        <i class="fas fa-sign-out-alt me-2"></i> Cerrar Sesión
                    </a>
                </nav>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 p-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2><i class="fas fa-cog"></i> Configuración del Sistema</h2>
                    <div class="btn-group">
                        <button class="btn btn-outline-primary" onclick="refreshSystem()">
                            <i class="fas fa-sync-alt"></i> Actualizar
                        </button>
                        <button class="btn btn-success" onclick="saveAllSettings()">
                            <i class="fas fa-save"></i> Guardar Todo
                        </button>
                    </div>
                </div>

                <!-- System Status -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card card-stats">
                            <div class="card-body text-center">
                                <i class="fas fa-server fa-2x text-primary mb-2"></i>
                                <h3 id="system-status">Online</h3>
                                <p class="mb-0">Estado del Sistema</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card card-stats">
                            <div class="card-body text-center">
                                <i class="fas fa-database fa-2x text-success mb-2"></i>
                                <h3 id="db-status">Conectado</h3>
                                <p class="mb-0">Base de Datos</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card card-stats">
                            <div class="card-body text-center">
                                <i class="fas fa-wifi fa-2x text-info mb-2"></i>
                                <h3 id="api-status">Activo</h3>
                                <p class="mb-0">APIs Externas</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card card-stats">
                            <div class="card-body text-center">
                                <i class="fas fa-shield-alt fa-2x text-warning mb-2"></i>
                                <h3 id="security-status">Seguro</h3>
                                <p class="mb-0">Seguridad</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Configuration Tabs -->
                <div class="card card-stats">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs" id="configTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general" type="button" role="tab">
                                    <i class="fas fa-cog"></i> General
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="apis-tab" data-bs-toggle="tab" data-bs-target="#apis" type="button" role="tab">
                                    <i class="fas fa-plug"></i> APIs
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button" role="tab">
                                    <i class="fas fa-shield-alt"></i> Seguridad
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="backup-tab" data-bs-toggle="tab" data-bs-target="#backup" type="button" role="tab">
                                    <i class="fas fa-download"></i> Backup
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab">
                                    <i class="fas fa-address-book"></i> Información de Contacto
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="legal-tab" data-bs-toggle="tab" data-bs-target="#legal" type="button" role="tab">
                                    <i class="fas fa-gavel"></i> Términos y Políticas
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="advertising-tab" data-bs-toggle="tab" data-bs-target="#advertising" type="button" role="tab">
                                    <i class="fas fa-bullhorn"></i> Publicidad y Notificaciones
                                </button>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div class="tab-content" id="configTabContent">
                            <!-- General Tab -->
                            <div class="tab-pane fade show active" id="general" role="tabpanel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Nombre de la Aplicación</label>
                                            <input type="text" class="form-control" id="app-name" value="{{ config.app_name }}">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">URL del Sitio</label>
                                            <input type="url" class="form-control" id="site-url" value="https://cubalink.com">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Zona Horaria</label>
                                            <select class="form-select" id="timezone">
                                                <option value="America/Havana">Cuba (Havana)</option>
                                                <option value="America/New_York">Estados Unidos (New York)</option>
                                                <option value="Europe/Madrid">España (Madrid)</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">Moneda Principal</label>
                                            <select class="form-select" id="currency">
                                                <option value="USD">USD - Dólar Estadounidense</option>
                                                <option value="EUR">EUR - Euro</option>
                                                <option value="CUP">CUP - Peso Cubano</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Idioma</label>
                                            <select class="form-select" id="language">
                                                <option value="es">Español</option>
                                                <option value="en">English</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Modo de Mantenimiento</label>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="maintenance-mode">
                                                <label class="form-check-label" for="maintenance-mode">
                                                    Activar modo mantenimiento
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- APIs Tab -->
                            <div class="tab-pane fade" id="apis" role="tabpanel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-plane"></i> Duffel API</h5>
                                        <div class="mb-3">
                                            <label class="form-label">API Token</label>
                                            <input type="password" class="form-control" id="duffel-token" placeholder="••••••••••••••••">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">API URL</label>
                                            <input type="url" class="form-control" id="duffel-url" value="https://api.duffel.com">
                                        </div>
                                        <div class="mb-3">
                                            <button class="btn btn-outline-primary" onclick="testDuffelAPI()">
                                                <i class="fas fa-test-tube"></i> Probar Conexión
                                            </button>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-mobile-alt"></i> DingConnect API</h5>
                                        <div class="mb-3">
                                            <label class="form-label">API Key</label>
                                            <input type="password" class="form-control" id="dingconnect-key" placeholder="••••••••••••••••">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">API URL</label>
                                            <input type="url" class="form-control" id="dingconnect-url" value="https://api.dingconnect.com">
                                        </div>
                                        <div class="mb-3">
                                            <button class="btn btn-outline-primary" onclick="testDingConnectAPI()">
                                                <i class="fas fa-test-tube"></i> Probar Conexión
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Security Tab -->
                            <div class="tab-pane fade" id="security" role="tabpanel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-lock"></i> Configuración de Seguridad</h5>
                                        <div class="mb-3">
                                            <label class="form-label">Tiempo de Sesión (minutos)</label>
                                            <input type="number" class="form-control" id="session-timeout" value="30">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Intentos de Login Máximos</label>
                                            <input type="number" class="form-control" id="max-login-attempts" value="5">
                                        </div>
                                        <div class="mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="two-factor-auth">
                                                <label class="form-check-label" for="two-factor-auth">
                                                    Activar autenticación de dos factores
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-key"></i> Cambiar Contraseña</h5>
                                        <div class="mb-3">
                                            <label class="form-label">Contraseña Actual</label>
                                            <input type="password" class="form-control" id="current-password">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Nueva Contraseña</label>
                                            <input type="password" class="form-control" id="new-password">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Confirmar Nueva Contraseña</label>
                                            <input type="password" class="form-control" id="confirm-password">
                                        </div>
                                        <div class="mb-3">
                                            <button class="btn btn-warning" onclick="changePassword()">
                                                <i class="fas fa-key"></i> Cambiar Contraseña
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Backup Tab -->
                            <div class="tab-pane fade" id="backup" role="tabpanel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-download"></i> Backup de Base de Datos</h5>
                                        <div class="mb-3">
                                            <button class="btn btn-primary" onclick="createBackup()">
                                                <i class="fas fa-download"></i> Crear Backup
                                            </button>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Backup Automático</label>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="auto-backup">
                                                <label class="form-check-label" for="auto-backup">
                                                    Activar backup automático
                                                </label>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Frecuencia de Backup</label>
                                            <select class="form-select" id="backup-frequency">
                                                <option value="daily">Diario</option>
                                                <option value="weekly">Semanal</option>
                                                <option value="monthly">Mensual</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-history"></i> Historial de Backups</h5>
                                        <div class="table-responsive">
                                            <table class="table table-sm">
                                                <thead>
                                                    <tr>
                                                        <th>Fecha</th>
                                                        <th>Tamaño</th>
                                                        <th>Estado</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="backup-history">
                                                    <tr>
                                                        <td colspan="3" class="text-center">No hay backups disponibles</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Contact Information Tab -->
                            <div class="tab-pane fade" id="contact" role="tabpanel">
                                
                                <!-- Logo Management Section -->
                                <div class="card card-stats mb-4">
                                    <div class="card-header">
                                        <h5 class="text-white"><i class="fas fa-image text-white"></i> Gestión del Logo de la Empresa</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="text-center mb-3">
                                                    <h6 class="text-white">Logo Actual</h6>
                                                    <img src="/static/img/company-logo.svg" alt="Logo Actual" style="width: 100px; height: 100px; border: 2px solid #0f3460; border-radius: 10px;">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label class="form-label text-white">Subir Nuevo Logo</label>
                                                    <input type="file" class="form-control" id="newLogo" accept="image/*,.svg">
                                                    <small class="text-white-50">Formatos soportados: SVG, PNG, JPG. Tamaño máximo: 2MB</small>
                                                </div>
                                                <button class="btn btn-success" onclick="uploadLogo()">
                                                    <i class="fas fa-upload"></i> Actualizar Logo
                                                </button>
                                                <button class="btn btn-outline-primary" onclick="previewLogo()">
                                                    <i class="fas fa-eye"></i> Vista Previa
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-phone"></i> Información de Contacto</h5>
                                        <div class="mb-3">
                                            <label class="form-label">Teléfono de Contacto</label>
                                            <input type="tel" class="form-control" id="contact-phone" value="+1 (555) 123-4567" placeholder="+1 (555) 123-4567">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Email de Contacto</label>
                                            <input type="email" class="form-control" id="contact-email" value="contacto@cubalink.com" placeholder="contacto@cubalink.com">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">WhatsApp</label>
                                            <input type="tel" class="form-control" id="contact-whatsapp" value="+1 (555) 987-6543" placeholder="+1 (555) 987-6543">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Dirección de la Empresa</label>
                                            <textarea class="form-control" id="contact-address" rows="3" placeholder="Dirección completa de la empresa">123 Calle Principal, La Habana, Cuba</textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-share-alt"></i> Redes Sociales</h5>
                                        <div class="mb-3">
                                            <label class="form-label">Facebook</label>
                                            <input type="url" class="form-control" id="social-facebook" value="https://facebook.com/cubalink" placeholder="https://facebook.com/cubalink">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Instagram</label>
                                            <input type="url" class="form-control" id="social-instagram" value="https://instagram.com/cubalink" placeholder="https://instagram.com/cubalink">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Twitter</label>
                                            <input type="url" class="form-control" id="social-twitter" value="https://twitter.com/cubalink" placeholder="https://twitter.com/cubalink">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Horario de Atención</label>
                                            <input type="text" class="form-control" id="business-hours" value="Lunes a Viernes: 9:00 AM - 6:00 PM" placeholder="Horario de atención al cliente">
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-12">
                                        <div class="alert alert-info">
                                            <i class="fas fa-info-circle"></i>
                                            <strong>Nota:</strong> Esta información se mostrará automáticamente en todas las pantallas de la app donde sea necesaria.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Advertising and Notifications Tab -->
                            <div class="tab-pane fade" id="advertising" role="tabpanel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="card card-stats mb-4">
                                            <div class="card-header">
                                                <h5 class="text-white"><i class="fas fa-image text-white"></i> Gestión de Banners de la App</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label class="form-label text-white">Banner Principal (Home)</label>
                                                    <input type="file" class="form-control" id="mainBanner" accept="image/*">
                                                    <small class="text-white-50">Tamaño recomendado: 1200x300px</small>
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label text-white">Banner Secundario</label>
                                                    <input type="file" class="form-control" id="secondaryBanner" accept="image/*">
                                                    <small class="text-white-50">Tamaño recomendado: 800x200px</small>
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label text-white">Banner de Promociones</label>
                                                    <input type="file" class="form-control" id="promoBanner" accept="image/*">
                                                    <small class="text-white-50">Tamaño recomendado: 600x150px</small>
                                                </div>
                                                <button class="btn btn-success" onclick="uploadBanners()">
                                                    <i class="fas fa-upload"></i> Actualizar Banners
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="card card-stats mb-4">
                                            <div class="card-header">
                                                <h5 class="text-white"><i class="fas fa-bell text-white"></i> Notificaciones Push</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label class="form-label text-white">Título de la Notificación</label>
                                                    <input type="text" class="form-control" id="pushTitle" placeholder="Título de la notificación">
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label text-white">Mensaje</label>
                                                    <textarea class="form-control" id="pushMessage" rows="3" placeholder="Mensaje de la notificación"></textarea>
                                                </div>
                                                <div class="mb-3">
                                                    <label class="form-label text-white">Tipo de Notificación</label>
                                                    <select class="form-select" id="pushType">
                                                        <option value="all">Todos los usuarios</option>
                                                        <option value="active">Usuarios activos</option>
                                                        <option value="vendors">Solo vendedores</option>
                                                        <option value="drivers">Solo repartidores</option>
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" id="pushUrgent">
                                                        <label class="form-check-label text-white" for="pushUrgent">
                                                            Notificación urgente (aparece con teléfono bloqueado)
                                                        </label>
                                                    </div>
                                                </div>
                                                <button class="btn btn-primary" onclick="sendPushNotification()">
                                                    <i class="fas fa-paper-plane"></i> Enviar Notificación
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-12">
                                        <div class="card card-stats">
                                            <div class="card-header">
                                                <h5 class="text-white"><i class="fas fa-history text-white"></i> Historial de Notificaciones</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th class="text-white">Fecha</th>
                                                                <th class="text-white">Título</th>
                                                                <th class="text-white">Mensaje</th>
                                                                <th class="text-white">Tipo</th>
                                                                <th class="text-white">Estado</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="notificationHistory">
                                                            <tr>
                                                                <td colspan="5" class="text-center text-white">No hay notificaciones enviadas</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Legal Documents Tab -->
                            <div class="tab-pane fade" id="legal" role="tabpanel">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-file-contract"></i> Términos y Condiciones</h5>
                                        <div class="mb-3">
                                            <label class="form-label">Términos y Condiciones</label>
                                            <textarea class="form-control" id="terms-conditions" rows="15" placeholder="Ingrese los términos y condiciones de la empresa">Al usar nuestros servicios, usted acepta los siguientes términos y condiciones:

1. ACEPTACIÓN DE TÉRMINOS
Al acceder y usar esta aplicación, usted acepta estar sujeto a estos términos y condiciones.

2. USO DEL SERVICIO
Nuestros servicios incluyen reservas de vuelos, compras de productos, transferencias de dinero y otros servicios relacionados.

3. PRIVACIDAD
Su información personal será tratada de acuerdo con nuestra política de privacidad.

4. MÉTODOS DE PAGO
- Todos los pagos deben realizarse a través de los métodos de pago aprobados.
- Los métodos de pago se almacenan de forma segura y encriptada.
- Solo se muestran los últimos 4 dígitos para identificación.
- Los métodos guardados solo se usan cuando usted autoriza una transacción específica.
- Los datos de pago no se pueden copiar ni ver completos desde la interfaz.

5. AUTORIZACIÓN DE TRANSACCIONES
- Cada transacción requiere su autorización explícita.
- Los métodos de pago guardados solo se usan dentro de la aplicación.
- Solo la empresa puede acceder a los datos completos para procesar transacciones autorizadas.

6. CANCELACIONES
Las cancelaciones están sujetas a las políticas de las aerolíneas y proveedores.

7. RESPONSABILIDAD
No nos hacemos responsables por pérdidas o daños indirectos.

8. SEGURIDAD
Implementamos medidas de seguridad para proteger su información personal y financiera.

9. MODIFICACIONES
Nos reservamos el derecho de modificar estos términos en cualquier momento.

10. CONTACTO
Para consultas, contáctenos a través de los canales oficiales.</textarea>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-user-shield"></i> Política de Privacidad</h5>
                                        <div class="mb-3">
                                            <label class="form-label">Política de Privacidad</label>
                                            <textarea class="form-control" id="privacy-policy" rows="15" placeholder="Ingrese la política de privacidad">POLÍTICA DE PRIVACIDAD

1. INFORMACIÓN QUE RECOPILAMOS
Recopilamos información que usted nos proporciona directamente, como nombre, email, teléfono, direcciones de entrega y datos de pago.

2. CÓMO USAMOS SU INFORMACIÓN
Utilizamos su información para:
- Procesar sus reservas y compras
- Proporcionar servicio al cliente
- Enviar notificaciones importantes
- Mejorar nuestros servicios
- Procesar transacciones autorizadas

3. MÉTODOS DE PAGO Y SEGURIDAD
- Los datos de pago se almacenan de forma encriptada y segura
- Solo se muestran los últimos 4 dígitos para identificación
- Los métodos de pago guardados solo se usan cuando usted autoriza una transacción
- Los datos completos solo son accesibles por el sistema de la empresa
- Se registra cada acceso a datos de pago para auditoría

4. COMPARTIR INFORMACIÓN
No vendemos, alquilamos ni compartimos su información personal con terceros, excepto:
- Proveedores de servicios necesarios
- Cumplimiento legal
- Con su consentimiento explícito

5. SEGURIDAD
Implementamos medidas de seguridad avanzadas para proteger su información personal y financiera, incluyendo encriptación de datos y auditoría de acceso.

6. SUS DERECHOS
Usted tiene derecho a:
- Acceder a su información
- Corregir datos inexactos
- Solicitar eliminación de datos
- Oponerse al procesamiento
- Revocar autorización de métodos de pago

7. COOKIES
Utilizamos cookies para mejorar su experiencia en nuestra aplicación.

8. CAMBIOS
Esta política puede actualizarse. Le notificaremos de cambios significativos.

9. CONTACTO
Para preguntas sobre privacidad, contáctenos.</textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-12">
                                        <div class="alert alert-warning">
                                            <i class="fas fa-exclamation-triangle"></i>
                                            <strong>Importante:</strong> Estos documentos legales son obligatorios y se mostrarán a los usuarios en la app.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Cargar datos al iniciar
        document.addEventListener('DOMContentLoaded', function() {
            loadSystemData();
        });

        function loadSystemData() {
            // Simular carga de datos del sistema
            console.log('Cargando configuración del sistema...');
            
            // Cargar información de contacto
            loadContactInfo();
        }

        function refreshSystem() {
            loadSystemData();
            alert('Sistema actualizado');
        }

        function saveAllSettings() {
            // Recopilar información de contacto
            const contactInfo = {
                phone: document.getElementById('contact-phone').value,
                email: document.getElementById('contact-email').value,
                whatsapp: document.getElementById('contact-whatsapp').value,
                address: document.getElementById('contact-address').value,
                facebook: document.getElementById('social-facebook').value,
                instagram: document.getElementById('social-instagram').value,
                twitter: document.getElementById('social-twitter').value,
                businessHours: document.getElementById('business-hours').value,
                termsConditions: document.getElementById('terms-conditions').value,
                privacyPolicy: document.getElementById('privacy-policy').value
            };

            // Enviar a la API
            fetch('/admin/api/contact-info', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(contactInfo)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Configuraciones guardadas correctamente');
                } else {
                    alert('Error al guardar las configuraciones');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al guardar las configuraciones');
            });
        }

        function loadContactInfo() {
            // Cargar información de contacto desde la API
            fetch('/admin/api/contact-info')
            .then(response => response.json())
            .then(data => {
                document.getElementById('contact-phone').value = data.phone || '';
                document.getElementById('contact-email').value = data.email || '';
                document.getElementById('contact-whatsapp').value = data.whatsapp || '';
                document.getElementById('contact-address').value = data.address || '';
                document.getElementById('social-facebook').value = data.facebook || '';
                document.getElementById('social-instagram').value = data.instagram || '';
                document.getElementById('social-twitter').value = data.twitter || '';
                document.getElementById('business-hours').value = data.business_hours || '';
                document.getElementById('terms-conditions').value = data.terms_conditions || '';
                document.getElementById('privacy-policy').value = data.privacy_policy || '';
            })
            .catch(error => {
                console.error('Error cargando información de contacto:', error);
            });
        }

        function testDuffelAPI() {
            alert('Probando conexión con Duffel API...');
        }

        function testDingConnectAPI() {
            alert('Probando conexión con DingConnect API...');
        }

        function changePassword() {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            if (!currentPassword || !newPassword || !confirmPassword) {
                alert('Por favor completa todos los campos');
                return;
            }

            if (newPassword !== confirmPassword) {
                alert('Las contraseñas no coinciden');
                return;
            }

            // Aquí iría la lógica para cambiar contraseña
            alert('Contraseña cambiada correctamente');
            
            // Limpiar campos
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
        }

        function createBackup() {
            alert('Creando backup de la base de datos...');
        }

        // Funciones para gestión de banners y notificaciones
        function uploadBanners() {
            const mainBanner = document.getElementById('mainBanner').files[0];
            const secondaryBanner = document.getElementById('secondaryBanner').files[0];
            const promoBanner = document.getElementById('promoBanner').files[0];
            
            if (!mainBanner && !secondaryBanner && !promoBanner) {
                alert('Por favor seleccione al menos un banner para subir');
                return;
            }
            
            const formData = new FormData();
            if (mainBanner) formData.append('main_banner', mainBanner);
            if (secondaryBanner) formData.append('secondary_banner', secondaryBanner);
            if (promoBanner) formData.append('promo_banner', promoBanner);
            
            fetch('/admin/api/upload-banners', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Banners actualizados correctamente');
                    // Limpiar campos
                    document.getElementById('mainBanner').value = '';
                    document.getElementById('secondaryBanner').value = '';
                    document.getElementById('promoBanner').value = '';
                } else {
                    alert('Error al actualizar banners: ' + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al actualizar banners');
            });
        }

        function sendPushNotification() {
            const title = document.getElementById('pushTitle').value;
            const message = document.getElementById('pushMessage').value;
            const type = document.getElementById('pushType').value;
            const urgent = document.getElementById('pushUrgent').checked;
            
            if (!title || !message) {
                alert('Por favor complete el título y mensaje de la notificación');
                return;
            }
            
            const notificationData = {
                title: title,
                message: message,
                type: type,
                urgent: urgent
            };
            
            fetch('/admin/api/send-push-notification', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(notificationData)
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Notificación enviada correctamente');
                    // Limpiar campos
                    document.getElementById('pushTitle').value = '';
                    document.getElementById('pushMessage').value = '';
                    document.getElementById('pushUrgent').checked = false;
                    // Actualizar historial
                    loadNotificationHistory();
                } else {
                    alert('Error al enviar notificación: ' + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al enviar notificación');
            });
        }

        function loadNotificationHistory() {
            fetch('/admin/api/notification-history')
            .then(response => response.json())
            .then(data => {
                const tbody = document.getElementById('notificationHistory');
                if (data.notifications && data.notifications.length > 0) {
                    tbody.innerHTML = data.notifications.map(notification => `
                        <tr>
                            <td class="text-white">${notification.date}</td>
                            <td class="text-white">${notification.title}</td>
                            <td class="text-white">${notification.message}</td>
                            <td class="text-white">${notification.type}</td>
                            <td class="text-white">
                                <span class="badge bg-success">Enviada</span>
                            </td>
                        </tr>
                    `).join('');
                } else {
                    tbody.innerHTML = '<tr><td colspan="5" class="text-center text-white">No hay notificaciones enviadas</td></tr>';
                }
            })
            .catch(error => {
                console.error('Error cargando historial:', error);
            });
        }

        // Funciones para gestión del logo
        function uploadLogo() {
            const fileInput = document.getElementById('newLogo');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Por favor seleccione un archivo de logo');
                return;
            }
            
            // Validar tipo de archivo
            const allowedTypes = ['image/svg+xml', 'image/png', 'image/jpeg', 'image/jpg'];
            if (!allowedTypes.includes(file.type)) {
                alert('Formato de archivo no soportado. Use SVG, PNG o JPG');
                return;
            }
            
            // Validar tamaño (2MB máximo)
            if (file.size > 2 * 1024 * 1024) {
                alert('El archivo es demasiado grande. Máximo 2MB');
                return;
            }
            
            const formData = new FormData();
            formData.append('logo', file);
            
            fetch('/admin/api/upload-logo', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Logo actualizado correctamente');
                    // Recargar la página para mostrar el nuevo logo
                    location.reload();
                } else {
                    alert('Error al actualizar el logo: ' + data.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error al actualizar el logo');
            });
        }

        function previewLogo() {
            const fileInput = document.getElementById('newLogo');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Por favor seleccione un archivo de logo');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                // Crear modal de vista previa
                const modal = document.createElement('div');
                modal.className = 'modal fade';
                modal.innerHTML = `
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content" style="background-color: #16213e; color: white;">
                            <div class="modal-header" style="background-color: #0f3460;">
                                <h5 class="modal-title">Vista Previa del Logo</h5>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body text-center">
                                <img src="${e.target.result}" alt="Vista Previa" style="max-width: 100%; max-height: 400px;">
                                <p class="mt-3">¿Desea aplicar este logo?</p>
                            </div>
                            <div class="modal-footer" style="background-color: #16213e;">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                <button type="button" class="btn btn-success" onclick="uploadLogo()">Aplicar Logo</button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
                new bootstrap.Modal(modal).show();
                
                // Limpiar modal después de cerrar
                modal.addEventListener('hidden.bs.modal', function() {
                    document.body.removeChild(modal);
                });
            };
            reader.readAsDataURL(file);
        }
    </script>
</body>
</html>
